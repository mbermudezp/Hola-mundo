

; BERMUDEZ PALOMINO MANUEL JHONATAN
; Efrain Cirilo Ari Machaca

LIST P=16F84A

STATUS EQU 0X03
PORTA EQU 0X05
PORTB EQU 0X06

ORG 0

BSF STATUS,5
CLRF PORTB
MOVLW B'00001111'
MOVWF PORTA
BCF STATUS,5

INICIO
 BTFSC PORTA,2 ;VERIFICAR SI SENSOR S3 DETECTA AGUA 
 GOTO SENSOR3_1 ; S3 SI DETECTA AGUA   = 1
 GOTO SENSOR3_0 ; S3 NO DETECTA AGUA  = 0
 
SENSOR3_1
 BTFSC PORTA,3 ; S3 DETECTA  AGUA , DETECTAR SI SENSOR S4 TIENE AGUA 
 GOTO ON_MOTOR ; S4 SI DETECTA AGUA  = 1 ---> TANQUE 02 LLENO NO NECESITA AGUA MANTIENE APAGADO EL MOTOR
 GOTO ENCENDER ; S4 NO DETECTA AGUA  = 0 ---> TANQUE 02 NO ESTA LLENO NECESITA AGUA ENCIENDE EL MOTOR
 
SENSOR3_0
 BTFSC PORTA,3 ; S3 NO TIENE AGUA , DETECTAR SI SENSOR S4 TIENE AGUA 
 GOTO FUC_ERROR ; GENERA ERROR S3 DETECTA AGUA S4 NO DETECTA AGUA
 GOTO ENCENDER ; S3 NO DETECTA AGUA S4 NO DETECTA AGUA --> TANQUE 02 VACIO ENECIENDE MOTOR
   
ENCENDER
 MOVLW B'00000001'
 MOVWF PORTB
 BTFSC PORTA,1;VERIFICAR SI SENSOR S2 DETECTA AGUA 
 GOTO SENSOR1_1 ; S2 SI DETECTA AGUA   = 1
 GOTO SENSOR1_0 ; S2 NO DETECTA AGUA  = 0
  
SENSOR1_1
 BTFSC PORTA,0 ; SENSOR S2 DETECTA AGUA , VERIFICAR SENSOR S1
 GOTO RUN_MOTOR; SENSOR S2 DETECTA AGUA Y SENSOR S1 DETECTA AGUA PONE EN MARCHA EL MOTOR
 GOTO FUC_ERROR; GENERA ERROR S2 DETECTA AGUA S1 NO DETECTA AGUA


SENSOR1_0  
 BTFSC PORTA,0 ; SENSOR S2 NO DETECTA AGUA , VERIFICAR SENSOR S1
 GOTO RUN_MOTOR ; SENSOR S2 NO DETECTA AGUA Y SENSOR S1 DETECTA AGUA PONE EN MARCHA EL MOTOR
 GOTO ON_MOTOR ; APAGA EL MOTOR S2 NO TIENE AGUA S1 NO DETECTA AGUA 
 
RUN_MOTOR
 MOVLW B'00000011'; PONE EN MARCHA EL MOTOR
 MOVWF PORTB
 GOTO INICIO
 
FUC_ERROR   
 MOVLW B'00000100' ; SE EJECUTA CUNDO LO SENSORES GENERAN ERROR
 MOVWF PORTB
 GOTO INICIO
   
ON_MOTOR   ; APAGA EL MOTOR
  MOVLW B'00000000'
 MOVWF PORTB
 GOTO INICIO
 
END